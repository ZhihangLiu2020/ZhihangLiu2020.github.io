<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《TCP/IP详解卷一》 | ZhihangLiu</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="icon" href="/browIcon.png">
    <link rel="alternate" type="application/atom+xml" href="https://zhihangliu2020.github.io/atom.xml" title="ZhihangLiu Atom Feed">
    <link rel="alternate" type="application/json" href="https://zhihangliu2020.github.io/feed.json" title="ZhihangLiu JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://zhihangliu2020.github.io/rss.xml" title="ZhihangLiu RSS Feed">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="Record and Summary">
    <meta property="og:url" content="/posts/book/tcp-ip.html">
    <meta property="og:site_name" content="ZhihangLiu">
    <meta property="og:title" content="《TCP/IP详解卷一》">
    <meta property="og:description" content="第一章 概述 应用程序（应用层）通常是一个用户进程，而下三层（运输层、网络层、链路层）一般在操作系统内核中执行。; 连接两个网络，可以使用路由器在网络层互连，也可以使用网桥在链路层互连。; 5类IP地址范围：; TCP和UDP都在首部中用一个16bit的端口号来标识应用程序。; IP为了标识上层协议，在首部中用8bit的数值来标识。1为ICPMP，6为TCP">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="ZhihangLiu">
    <meta property="article:author" content="zhl">
    <meta property="article:tag" content="network">
    <meta property="article:published_time" content="2021-04-02T00:00:00.000Z">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.f77cc59d.css" as="style"><link rel="preload" href="/assets/js/app.ad0fc5cb.js" as="script"><link rel="preload" href="/assets/js/layout-Layout.4d114446.js" as="script"><link rel="preload" href="/assets/js/layout-Blog~layout-Layout~layout-NotFound.2f0f0eae.js" as="script"><link rel="preload" href="/assets/js/page-《TCPIP详解卷一》.891001fa.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.9988a3b9.js" as="script"><link rel="prefetch" href="/assets/js/39.8db7c3e6.js"><link rel="prefetch" href="/assets/js/40.5e7aeb15.js"><link rel="prefetch" href="/assets/js/41.aff94f10.js"><link rel="prefetch" href="/assets/js/42.ddf93143.js"><link rel="prefetch" href="/assets/js/43.71d73418.js"><link rel="prefetch" href="/assets/js/44.202a912b.js"><link rel="prefetch" href="/assets/js/45.a5f5eeff.js"><link rel="prefetch" href="/assets/js/layout-Blog.033c329d.js"><link rel="prefetch" href="/assets/js/layout-NotFound.6dfac234.js"><link rel="prefetch" href="/assets/js/layout-Slide.72f005a9.js"><link rel="prefetch" href="/assets/js/page-BookList.cbd71e4b.js"><link rel="prefetch" href="/assets/js/page-Electron渲染进程报错requireisnotdefined.14c49f17.js"><link rel="prefetch" href="/assets/js/page-Github+vuepress搭建个人博客.608bf773.js"><link rel="prefetch" href="/assets/js/page-Home.53a11629.js"><link rel="prefetch" href="/assets/js/page-Linux命令.8548b21d.js"><link rel="prefetch" href="/assets/js/page-PracticeArena.9c580937.js"><link rel="prefetch" href="/assets/js/page-ProblemList.0e42c7ff.js"><link rel="prefetch" href="/assets/js/page-ProjectList.784b2e0a.js"><link rel="prefetch" href="/assets/js/page-RESTful架构.52970345.js"><link rel="prefetch" href="/assets/js/page-TechList.3279c113.js"><link rel="prefetch" href="/assets/js/page-Vue-router的嵌套路由.1408ea37.js"><link rel="prefetch" href="/assets/js/page-ava-commander-back.590561c5.js"><link rel="prefetch" href="/assets/js/page-ava-commander-front.8f44ad83.js"><link rel="prefetch" href="/assets/js/page-vue-routerduplicatenamedroutesdefinition报错.818fe779.js"><link rel="prefetch" href="/assets/js/page-vuepress2踩坑.09d03c3c.js"><link rel="prefetch" href="/assets/js/page-vuetifyUI组件.152dbc72.js"><link rel="prefetch" href="/assets/js/page-vuex报错unknownactiontypeXXX.18c408ac.js"><link rel="prefetch" href="/assets/js/page-vue使用.8e1a70ed.js"><link rel="prefetch" href="/assets/js/page-《密码编码学与网络安全》.96bd7952.js"><link rel="prefetch" href="/assets/js/page-《深入理解计算机系统》.6001a907.js"><link rel="prefetch" href="/assets/js/page-《计算机程序的构造和解释》.4c64b1fb.js"><link rel="prefetch" href="/assets/js/page-代码练习-20210802.afba1bc2.js"><link rel="prefetch" href="/assets/js/page-代码练习-20210803.921651e7.js"><link rel="prefetch" href="/assets/js/page-使用shell创建github远程仓库.be61f93d.js"><link rel="prefetch" href="/assets/js/page-关于JavaScript原型链的理解.775d2486.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.504a2133.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.dec26f36.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.91750a9c.js"><link rel="prefetch" href="/assets/js/vendors~reveal.7c37bd5d.js"><link rel="prefetch" href="/assets/js/vendors~valine.e6ab0ab7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f77cc59d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/Icon.png" alt="ZhihangLiu" class="logo"> <!----> <span class="site-name can-hide">ZhihangLiu</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/posts/prob/" class="nav-link"><i class="iconfont icon-debug"></i>
  Problem Log
</a></div><div class="nav-item"><a href="/posts/tech/" class="nav-link"><i class="iconfont icon-note"></i>
  Tech Note
</a></div><div class="nav-item"><a href="/posts/proj/" class="nav-link"><i class="iconfont icon-frame"></i>
  Project Desc
</a></div><div class="nav-item"><a href="/posts/book/" class="nav-link router-link-active active"><i class="iconfont icon-study"></i>
  Reading Book
</a></div><div class="nav-item"><a href="/posts/prac/" class="nav-link"><i class="iconfont icon-write"></i>
  Practice Area
</a></div><div class="nav-item"><a href="https://zhihangliu2020.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-people"></i>
  About Me
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info mobile"><div data-balloon-pos="down" role="navigation" class="blogger hasIntro"><meta property="url" content="/intro/"></div> <div class="num-wrapper"><div><div class="num">20</div> <div>Articles</div></div> <div><div class="num">5</div> <div>Category</div></div> <div><div class="num">15</div> <div>Tags</div></div> <div><div class="num">20</div> <div>Timeline</div></div></div> <div class="media-links-wrapper"></div></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/posts/prob/" class="nav-link"><i class="iconfont icon-debug"></i>
  Problem Log
</a></div><div class="nav-item"><a href="/posts/tech/" class="nav-link"><i class="iconfont icon-note"></i>
  Tech Note
</a></div><div class="nav-item"><a href="/posts/proj/" class="nav-link"><i class="iconfont icon-frame"></i>
  Project Desc
</a></div><div class="nav-item"><a href="/posts/book/" class="nav-link router-link-active active"><i class="iconfont icon-study"></i>
  Reading Book
</a></div><div class="nav-item"><a href="/posts/prac/" class="nav-link"><i class="iconfont icon-write"></i>
  Practice Area
</a></div><div class="nav-item"><a href="https://zhihangliu2020.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont icon-people"></i>
  About Me
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/posts/book/" aria-current="page" class="sidebar-link">Book List</a></li><li><a href="/posts/book/os/" class="sidebar-link">《深入理解计算机系统》</a></li><li><a href="/posts/book/tcp-ip/" aria-current="page" class="active sidebar-link">《TCP/IP详解卷一》</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第一章-概述" class="sidebar-link">第一章 概述</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第二章-链路层" class="sidebar-link">第二章 链路层</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第三章-ip-网际协议" class="sidebar-link">第三章 IP：网际协议</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第四章-arp" class="sidebar-link">第四章 ARP</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第五章-rarp" class="sidebar-link">第五章 RARP</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第六章-icmp-internet控制报文协议" class="sidebar-link">第六章 ICMP：Internet控制报文协议</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第七章-ping程序" class="sidebar-link">第七章 Ping程序</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第八章-traceroute程序" class="sidebar-link">第八章 traceroute程序</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第九章-ip选路-单个系统" class="sidebar-link">第九章 IP选路（单个系统）</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第十章-动态选路协议-路由器之间" class="sidebar-link">第十章 动态选路协议（路由器之间）</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第十一章-udp-用户数据报协议" class="sidebar-link">第十一章 UDP：用户数据报协议</a></li><li class="sidebar-sub-header"><a href="/posts/book/tcp-ip/#第十二章-广播和多播" class="sidebar-link">第十二章 广播和多播</a></li></ul></li><li><a href="/posts/book/network-security/" class="sidebar-link">《密码编码学与网络安全》</a></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/posts/book/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">Book List</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/posts/book/tcp-ip/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">《TCP/IP详解卷一》</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">《TCP/IP详解卷一》</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">zhl</span></span><span aria-label="Page views🔢" data-balloon-pos="down" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 0 0-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/posts/book/tcp-ip/" data-flag-title="《TCP/IP详解卷一》" class="leancloud_visitors"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-04-02 </span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zm-.854 446.486H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zm446.371-446.486h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zm136.293 813.51H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span property="articleSection">Book</span></span><span aria-label="Tags🏷" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">Network</span></li></ul> <meta property="keywords" content="Network"></span><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 7 min</span> <meta property="timeRequired" content="PT7M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/posts/book/tcp-ip/#第一章-概述" class="anchor-link heading2"><div>第一章 概述</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第二章-链路层" class="anchor-link heading2"><div>第二章 链路层</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第三章-ip-网际协议" class="anchor-link heading2"><div>第三章 IP：网际协议</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第四章-arp" class="anchor-link heading2"><div>第四章 ARP</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第五章-rarp" class="anchor-link heading2"><div>第五章 RARP</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第六章-icmp-internet控制报文协议" class="anchor-link heading2"><div>第六章 ICMP：Internet控制报文协议</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第七章-ping程序" class="anchor-link heading2"><div>第七章 Ping程序</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第八章-traceroute程序" class="anchor-link heading2"><div>第八章 traceroute程序</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第九章-ip选路-单个系统" class="anchor-link heading2"><div>第九章 IP选路（单个系统）</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第十章-动态选路协议-路由器之间" class="anchor-link heading2"><div>第十章 动态选路协议（路由器之间）</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第十一章-udp-用户数据报协议" class="anchor-link heading2"><div>第十一章 UDP：用户数据报协议</div></a></li><li class="anchor"><a href="/posts/book/tcp-ip/#第十二章-广播和多播" class="anchor-link heading2"><div>第十二章 广播和多播</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h2 id="第一章-概述"><a href="#第一章-概述" class="header-anchor">#</a> 第一章 概述</h2> <ul><li><p>应用程序（应用层）通常是一个用户进程，而下三层（运输层、网络层、链路层）一般在操作系统内核中执行。</p></li> <li><p>连接两个网络，可以使用路由器在网络层互连，也可以使用网桥在链路层互连。</p> <img src="/imgs/截屏2021-04-13 下午11.05.57.png" alt="截屏2021-04-13 下午11.05.57" style="zoom:50%;"></li> <li><p>5类IP地址范围：</p> <img src="/imgs/截屏2021-04-13 下午11.10.17.png" alt="截屏2021-04-13 下午11.10.17" style="zoom:50%;"> <img src="/imgs/截屏2021-04-13 下午11.10.35.png" alt="截屏2021-04-13 下午11.10.35" style="zoom:50%;"></li> <li><p>TCP和UDP都在首部中用一个16bit的端口号来标识应用程序。</p> <p>IP为了标识上层协议，在首部中用8bit的数值来标识。1为ICPMP，6为TCP，17为UDP。</p> <p>以太网帧在首部用16bit来标识网络层的协议。（IP、ARP、RARP）</p></li> <li><p>分用：目的主机收到以太网帧时，层层上交给对应的上层协议，这个过程叫分用。<img src="/imgs/截屏2021-04-13 下午11.28.23.png" alt="截屏2021-04-13 下午11.28.23" style="zoom:50%;"></p></li> <li><p>CS模型分为两种：一般TCP服务器是并发的，UDP服务器是重复的</p> <ul><li>重复型<img src="/imgs/截屏2021-04-13 下午11.30.55.png" alt="截屏2021-04-13 下午11.30.55" style="zoom:50%;"></li> <li>并发型<img src="/imgs/截屏2021-04-13 下午11.31.22.png" alt="截屏2021-04-13 下午11.31.22" style="zoom:50%;"></li></ul></li></ul> <h2 id="第二章-链路层"><a href="#第二章-链路层" class="header-anchor">#</a> 第二章 链路层</h2> <ul><li><p>链路层主要3个目的：</p> <ul><li>为IP模块发送和接收</li> <li>为ARP模块发送和应答</li> <li>为RARP模块发送和应答</li></ul></li> <li><p>以太网就是局域网技术，采用CSMA/CD接入方法，速率为10MB/s，地址为48bit（mac地址），以太网封装格式：<img src="/imgs/截屏2021-04-13 下午11.48.52.png" alt="截屏2021-04-13 下午11.48.52" style="zoom:50%;"></p></li> <li><p>PPP协议：经常用于低速的串行链路。</p> <img src="/imgs/截屏2021-04-13 下午11.55.11.png" alt="截屏2021-04-13 下午11.55.11" style="zoom:50%;"></li> <li><p>路径MTU：当两个不同网络中的主机之间通信时，两台主机路径的最小MTU叫做路径MTU，并且两个方向上的路径MTU可能不同。</p></li></ul> <h2 id="第三章-ip-网际协议"><a href="#第三章-ip-网际协议" class="header-anchor">#</a> 第三章 IP：网际协议</h2> <ul><li><p>如果IP数据包在中途被丢弃了，会发送ICMP消息给信源端。</p> <p>IP首部：最高位在左边0bit，最低位在右边，记为31bit。</p> <img src="/imgs/截屏2021-04-14 上午12.16.41.png" alt="截屏2021-04-14 上午12.16.41" style="zoom:50%;"> <p>**大端字节序：**传输的时候顺序为：0-7，8-15，16-23，24-31.</p> <p>TCP/IP首部中所有的二进制整数在网络中传输都用大端字节序，因此又叫网络字节序。以小端格式存储二进制整数的机器，在传输前要先把首部转换成网络字节序。</p> <p>**首部长度：**以32bit（4字节）为单位，因此首部最长60字节。普通IP数据报这个字段的值为5.</p> <p>**服务类型：**其中有4bit位决定服务类型，分别代表最小时延、最大吞吐量、最高可靠性、最小费用，且同时只能有1位置位1.一般数据报4位全0.</p> <img src="/imgs/截屏2021-04-14 上午12.27.34.png" alt="截屏2021-04-14 上午12.27.34" style="zoom:50%;"> <p>标识：该字段唯一的标识主机发送的每一份数据报，每发送一份就加1.</p> <p>TTL：初始值由源主机设置（32或64），一旦经过一个路由器，就减1，当该字段为0时，被丢弃并且发送ICMP消息给源端。</p> <p>首部检验和：根据IP首部计算的检验和码，不包括数据部分。与之不同的是，ICMP，TCP，UDP的检验和都包括对数据部分的计算。</p></li> <li><p>当今大多数的主机，既可以配置成主机，也可以配置成路由器。本质区别是，主机从不把数据报从一个接口转发到另一个接口。</p></li> <li><p>IP层的路由表存在内存中，收到一份数据报时，如果目的IP是本机或者广播，那就送到上层，否则：1）如果IP层被设置为路由器的功能，就转发；2）如果没有设置成路由器，就丢弃。</p></li> <li><p>IP路由选择算法：</p></li></ul> <img src="/imgs/截屏2021-04-14 上午12.43.02.png" alt="截屏2021-04-14 上午12.43.02" style="zoom:50%;"> <h2 id="第四章-arp"><a href="#第四章-arp" class="header-anchor">#</a> 第四章 ARP</h2> <ul><li><p>点对点链路不使用ARP，设置这种链路时，必须告知内核，链路每一端的IP地址，并且不涉及mac地址。</p></li> <li><p>ARP请求/应答分组格式：</p> <img src="/imgs/截屏2021-04-14 上午12.59.39.png" alt="截屏2021-04-14 上午12.59.39" style="zoom:50%;"></li></ul> <h2 id="第五章-rarp"><a href="#第五章-rarp" class="header-anchor">#</a> 第五章 RARP</h2> <ul><li>ARP是完成IP到MAC的转换，RARP是完成MAC到IP的转换。</li></ul> <h2 id="第六章-icmp-internet控制报文协议"><a href="#第六章-icmp-internet控制报文协议" class="header-anchor">#</a> 第六章 ICMP：Internet控制报文协议</h2> <ul><li><p>ICMP报文封装在IP数据报内部</p> <img src="/imgs/截屏2021-04-14 上午10.08.15.png" alt="截屏2021-04-14 上午10.08.15" style="zoom:50%;"></li> <li><p>所有ICMP报文的前4个字节都是3个字段，后面的内容根据类型和代码的不同而不同</p> <img src="/imgs/截屏2021-04-14 上午10.12.33.png" alt="截屏2021-04-14 上午10.12.33" style="zoom:50%;"></li> <li><p>下面情况不会导致ICMP差错报文产生：</p> <ul><li>ICMP差错报文（ICMP查询报文可能会产生ICMP差错报文）</li> <li>目的地址是广播或多播的IP数据报</li> <li>作为链路层广播的数据报</li> <li>不是IP分片的第一片</li> <li>源地址不是单个主机的数据报。即源地址不能是零地址，环回地址，广播或多播地址。</li></ul></li></ul> <h2 id="第七章-ping程序"><a href="#第七章-ping程序" class="header-anchor">#</a> 第七章 Ping程序</h2> <ul><li><p>PIng其实就是发送ICMP回显请求报文，返回ICMP回显应答报文。它不经过传输层，ping服务器一般在内核中实现ICMP的功能。</p> <img src="/imgs/截屏2021-04-14 上午10.28.03.png" alt="截屏2021-04-14 上午10.28.03" style="zoom:50%;"></li></ul> <h2 id="第八章-traceroute程序"><a href="#第八章-traceroute程序" class="header-anchor">#</a> 第八章 traceroute程序</h2> <ul><li>traceroute程序可以显示IP数据报从一台主机到另一台主机所经过的路由。</li> <li>traceroute使用UDP，选择一个不可能的值作为UDP目的端口号，使目的主机产生一份端口不可达错误的ICMP报文，从而知道已经到达了目的主机，traceroute程序停止。若收到的是ICMP超时报文，说明还没到达目的主机，继续增加TTL并发送。</li> <li>traceroute操作过程：
<ul><li>发送TTL=1的IP数据报给目的主机，处理该数据报的第一个路由器将TTL减1，丢弃，并发回一份超时ICMP报文，这样就得到了第一个路由器的地址</li> <li>发送TTL=2的IP数据报，得到第二个路由器的地址</li> <li>继续这个过程，直到该数据报到达目的主机</li></ul></li> <li>traceroute对于每个TTL都发送3份数据报，每收到一个回答就打印往返时间，没收到就打印一个*。</li></ul> <h2 id="第九章-ip选路-单个系统"><a href="#第九章-ip选路-单个系统" class="header-anchor">#</a> 第九章 IP选路（单个系统）</h2> <ul><li>netstat -rn 查看路由表</li> <li>路由表flag字段含义：<img src="/imgs/截屏2021-04-14 上午11.44.06.png" alt="截屏2021-04-14 上午11.44.06" style="zoom:50%;"></li> <li><img src="/imgs/截屏2021-04-14 上午11.50.25.png" alt="截屏2021-04-14 上午11.50.25" style="zoom:50%;"></li></ul> <h2 id="第十章-动态选路协议-路由器之间"><a href="#第十章-动态选路协议-路由器之间" class="header-anchor">#</a> 第十章 动态选路协议（路由器之间）</h2> <ul><li><p>路由器中有一个守护进程，运行选路协议，与相邻的路由器进行通信。</p></li> <li><p>IGP(Interior Gateway Protocol)：内部网关协议</p> <ul><li>RIP</li> <li>OSPF</li></ul></li> <li><p>EGP(Exterior Gateway Protocol)：外部网关协议</p> <ul><li>BGP</li></ul></li> <li><p>RIP报文封装在UDP中：</p> <img src="/imgs/截屏2021-04-19 下午11.25.19.png" alt="截屏2021-04-19 下午11.25.19" style="zoom:50%;"></li></ul> <h2 id="第十一章-udp-用户数据报协议"><a href="#第十一章-udp-用户数据报协议" class="header-anchor">#</a> 第十一章 UDP：用户数据报协议</h2> <ul><li><p>UDP数据报格式：</p> <img src="/imgs/截屏2021-04-19 下午11.30.53.png" alt="截屏2021-04-19 下午11.30.53" style="zoom:50%;"> <img src="/imgs/截屏2021-04-19 下午11.31.08.png" alt="截屏2021-04-19 下午11.31.08" style="zoom:50%;"></li> <li><p>TCP端口号和UDP端口号是独立的，因为IP层根据协议字段已经把数据报上交给了正确的协议。如果使用TCP和UDP同时提供某种知名服务，两种协议通常选择相同的端口号。</p></li> <li><p>UDP的检验和是可选的，TCP是必须的。</p></li> <li><p>IP分片：由于以太网MTU的限制，需要把IP数据报分片</p> <ul><li>理论上IP数据报最大长度为65535字节</li> <li>把一份IP数据报分片后，只有到达目的地才进行重新组装。</li></ul></li></ul> <h2 id="第十二章-广播和多播"><a href="#第十二章-广播和多播" class="header-anchor">#</a> 第十二章 广播和多播</h2> <ul><li>广播和多播仅应用于UDP</li></ul></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">August 8, 2021 16:49</span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/posts/book/os/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        《深入理解计算机系统》
      </a></span> <span class="next"><a href="/posts/book/network-security/">
        《密码编码学与网络安全》
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <div class="comments-wrapper"><div class="valine-wrapper"><div id="valine"></div></div></div> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><div class="media-links-wrapper"></div> <!----> <div class="copyright">Copyright © 2021 zhl</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.ad0fc5cb.js" defer></script><script src="/assets/js/layout-Layout.4d114446.js" defer></script><script src="/assets/js/layout-Blog~layout-Layout~layout-NotFound.2f0f0eae.js" defer></script><script src="/assets/js/page-《TCPIP详解卷一》.891001fa.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.9988a3b9.js" defer></script>
  </body>
</html>
